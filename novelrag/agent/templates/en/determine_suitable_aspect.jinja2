You are an expert at analyzing content creation tasks and determining the most appropriate aspect for organizing and storing information. Based on the step description and context, you need to identify which existing aspect is most suitable for a write operation, or suggest a new aspect name if none are appropriate.

## Understanding the Task

You are analyzing a step that involves creating or updating content. Your goal is to:

1. **Evaluate Existing Aspects**: Determine if any existing aspects are suitable for this write operation
2. **Match Purpose**: Find the aspect that best matches what the step intends to create/update
3. **Consider Context**: Use the provided context to understand the broader scope of the operation
4. **Suggest New Aspects**: If no existing aspect fits, create a descriptive noun-based name for a new aspect

## Aspect Selection Criteria

### Primary Considerations
- **Content Type Alignment**: Does the step create/update content that naturally belongs in this aspect?
- **Semantic Match**: Does the aspect's purpose align with the step's intent?
- **Scope Appropriateness**: Is the aspect at the right level of granularity for this operation?

### Context Integration
- Use the provided context to understand what the step is trying to accomplish
- Consider how this step fits into the larger workflow or narrative structure
- Look for clues about the type of content being created or modified

## Existing Aspects Analysis

{% for aspect in aspects %}
### {{ aspect.name }}
**Description**: {{ aspect.description or "No description available" }}
**Children Keys**: {{ aspect.children_keys | join(", ") if aspect.children_keys else "None" }}

{%- endfor %}

## Domain Examples for New Aspects

When suggesting new aspect names, consider these diverse domains and use important nouns:

### Creative Writing
- **character**: Individual people, entities, or personas
- **setting**: Locations, environments, worlds, places
- **plot**: Story events, narrative arcs, plot points
- **theme**: Central ideas, messages, symbolic elements
- **dialogue**: Conversations, speech patterns, verbal interactions
- **scene**: Individual story segments, dramatic units
- **chapter**: Book divisions, narrative sections
- **outline**: Story structure, plot summaries, organization

### Technical Documentation
- **api**: Interface definitions, endpoints, specifications
- **tutorial**: Step-by-step guides, learning materials
- **reference**: Documentation, manuals, lookup information
- **example**: Code samples, demonstrations, illustrations
- **configuration**: Settings, parameters, setup instructions
- **troubleshooting**: Problem-solving guides, error resolution
- **architecture**: System design, structural documentation

### Business Processes
- **workflow**: Process flows, operational procedures
- **policy**: Rules, guidelines, organizational standards
- **procedure**: Step-by-step instructions, protocols
- **milestone**: Project markers, achievement points
- **resource**: Assets, materials, tools, personnel
- **requirement**: Specifications, needs, constraints
- **stakeholder**: People, roles, organizational entities

### Educational Content
- **lesson**: Individual learning units, educational segments
- **curriculum**: Course structure, learning paths
- **assessment**: Tests, evaluations, measurements
- **objective**: Learning goals, educational targets
- **activity**: Learning exercises, interactive elements
- **concept**: Ideas, principles, theoretical frameworks

### Project Management
- **task**: Individual work items, action items
- **deliverable**: Project outputs, completed items
- **timeline**: Schedules, project phases, time planning
- **team**: Groups, roles, personnel organization
- **budget**: Financial planning, cost tracking
- **risk**: Potential issues, mitigation strategies

## Analysis Instructions

1. **Review Each Existing Aspect**: For each aspect, consider whether the step's intent aligns with that aspect's purpose
2. **Evaluate Semantic Fit**: Does the step naturally belong in any existing aspect?
3. **Consider Context Clues**: Use the context to understand what type of content is being created
4. **Make Decision**: Choose the most suitable existing aspect OR suggest a new aspect name

## Response Format

Provide your response as a JSON object with the following structure:

```json
{
  "selected_aspect": "aspect_name",
  "reasoning": "Brief explanation of why this aspect was selected",
  "is_new_aspect": false,
  "confidence": 0.85
}
```

Where:
- **selected_aspect**: The name of the chosen existing aspect or suggested new aspect name
- **reasoning**: 1-2 sentences explaining the selection rationale
- **is_new_aspect**: Boolean indicating whether this is a new aspect suggestion
- **confidence**: Float between 0.0-1.0 indicating confidence in the selection

## Your Task

Please determine the most suitable aspect or create new aspect for the step described below, using the provided context and existing aspects.

**Step Intent**: {{ step_intent }}

### Context Information

{% for item in context %}
- {{ item }}
{%- endfor %}

## Important Guidelines

- **New aspect names should be important nouns** (like "character", "outline", "setting")
- **Avoid generic terms** like "relationship" (handled as resource fields) or "data"
- **Use multi-word names if needed** for clarity (like "user_interface", "world_building")
- **Prioritize existing aspects** when there's a reasonable fit
- **Be decisive** - choose the single most appropriate aspect
