You are tasked with filtering and reordering context information to help complete a specific step.

## Understanding Context Filtering

Context filtering involves analyzing information items and determining their relevance to a specific task or step. The process includes:
- **Relevance Analysis**: Determining how useful each item is for the current step
- **Duplicate Removal**: Eliminating redundant information across items
- **Content Cleaning**: Removing unrelated text while preserving relevant information
- **Prioritization**: Reordering items by relevance (most relevant first)

## Filtering Criteria

The filtering process considers the following aspects:

1. **Relevance Assessment**: How directly each context item relates to completing the current step
2. **Information Quality**: Whether the item contains actionable or useful information
3. **Redundancy Check**: Identifying and removing duplicate information across items
4. **Content Cleaning**: Removing unrelated text while preserving ALL potentially relevant information
5. **Priority Ranking**: Ordering items from most to least relevant to the step
6. **Conservative Approach**: When in doubt, keep information that might be useful

## Response Format

Your response must be a valid JSON object with the following structure:
```json
{
  "filtered_context": [
    {
      "original_number": 1,
      "description": "Most relevant context item",
      "relevance_score": "high|medium|low",
      "reason": "Brief explanation of why this is relevant",
      "cleaned_changes": "What was removed or modified from original"
    },
    {
      "original_number": 2,
      "description": "Second most relevant context item",
      "relevance_score": "high|medium|low",
      "reason": "Brief explanation of why this is relevant",
      "cleaned_changes": "What was removed or modified from original"
    }
  ]
}
```

## Examples

### Example 1:
Step: "Configure database connection for the application"
Context:
1. {"description": "The weather today is sunny with temperatures reaching 25Â°C. The database credentials are stored in config.yml file."}
2. {"description": "MySQL server is running on port 3306 with username 'admin'"}
3. {"description": "The company was founded in 2010. Database password is 'secure123'"}
4. {"description": "Connection string format: mysql://username:password@host:port/database"}
5. {"description": "The database credentials are in config.yml: username is admin"}

Filtered Output:
```json
{
  "filtered_context": [
    {
      "original_number": 4,
      "description": "Connection string format: mysql://username:password@host:port/database",
      "relevance_score": "high",
      "reason": "Essential format needed for database connection configuration",
      "cleaned_changes": "None - fully relevant"
    },
    {
      "original_number": 2,
      "description": "MySQL server is running on port 3306 with username 'admin'",
      "relevance_score": "high",
      "reason": "Provides specific connection parameters needed",
      "cleaned_changes": "None - fully relevant"
    },
    {
      "original_number": 3,
      "description": "Database password is 'secure123'",
      "relevance_score": "high",
      "reason": "Required credential for database authentication",
      "cleaned_changes": "Removed irrelevant company founding date"
    },
    {
      "original_number": 1,
      "description": "The database credentials are stored in config.yml file",
      "relevance_score": "medium",
      "reason": "Indicates where to find/store configuration details",
      "cleaned_changes": "Removed weather information"
    }
  ]
}
```

### Example 2:
Step: "Install Python dependencies for the project"
Context:
1. {"description": "Run pip install -r requirements.txt to install dependencies"}
2. {"description": "The project uses Python 3.8 or higher"}
3. {"description": "Yesterday's meeting discussed budget allocations. Make sure pip is updated first."}
4. {"description": "Common dependencies include numpy, pandas, and requests"}
5. {"description": "Use pip install -r requirements.txt for dependency installation"}
6. {"description": "Virtual environment should be activated before installation"}

Filtered Output:
```json
{
  "filtered_context": [
    {
      "original_number": 6,
      "description": "Virtual environment should be activated before installation",
      "relevance_score": "high",
      "reason": "Critical prerequisite step for proper dependency installation",
      "cleaned_changes": "None - fully relevant"
    },
    {
      "original_number": 2,
      "description": "The project uses Python 3.8 or higher",
      "relevance_score": "high",
      "reason": "Version requirement affects dependency compatibility",
      "cleaned_changes": "None - fully relevant"
    },
    {
      "original_number": 3,
      "description": "Make sure pip is updated first",
      "relevance_score": "medium",
      "reason": "Important preparation step for dependency installation",
      "cleaned_changes": "Removed budget meeting discussion"
    },
    {
      "original_number": 1,
      "description": "Run pip install -r requirements.txt to install dependencies",
      "relevance_score": "high",
      "reason": "Direct command for the installation task",
      "cleaned_changes": "Removed duplicate from item 5"
    },
    {
      "original_number": 4,
      "description": "Common dependencies include numpy, pandas, and requests",
      "relevance_score": "low",
      "reason": "Provides context about expected dependencies",
      "cleaned_changes": "None - fully relevant"
    }
  ]
}
```

## Your Task

Analyze the provided context items to filter and reorder them for the current step. Focus on:

1. **Relevance Assessment**: Determine how each item relates to completing the current step
2. **Duplicate Removal**: Eliminate redundant information across context items
3. **Content Cleaning**: Remove unrelated text while preserving potentially relevant information
4. **Priority Ranking**: Order items from most to least relevant
5. **Conservative Filtering**: When in doubt, keep information that might be useful

## Prioritization Guidelines

- **High Relevance**: Items directly needed to complete the step
- **Medium Relevance**: Items that provide helpful context or supporting information
- **Low Relevance**: Items that add background context but aren't immediately critical

## Input Information

**Current Step:**
```
{{ step }}
```

**Context Items:**
{% for item in context %}
{{ loop.index }}. {{ item }}
{%- endfor %}

## Instructions

1. Analyze each context item and determine its relevance to completing the current step
2. Remove any context items that are completely unrelated to the step
3. Remove duplicate information across context items
4. Reorder the remaining items by relevance (most relevant first)
5. Clean up each item by removing unrelated text while preserving ALL potentially relevant information
6. Be conservative - when in doubt, keep information that might be useful

Generate your response as a valid JSON object following the specified format.